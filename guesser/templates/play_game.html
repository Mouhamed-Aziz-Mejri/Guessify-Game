{% extends 'base.html' %}

{% block title %}Guessify Game - Question {{ question_number }}{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <!-- Progress Bar -->
    <div class="card rounded-2xl p-4 mb-4">
        <div class="flex justify-between items-center mb-2">
            <span class="text-sm font-semibold text-gray-600">Progress</span>
            <span class="text-sm font-semibold text-purple-600">{{ progress_percentage|floatformat:0 }}%</span>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-3 overflow-hidden">
            <div class="progress-bar bg-gradient-to-r from-purple-500 to-pink-500 h-3 rounded-full transition-all duration-500" 
                 style="width: {{ progress_percentage }}%"></div>
        </div>
        <div class="flex justify-between mt-2 text-xs text-gray-500">
            <span>Question {{ question_number }} of {{ total_questions }}</span>
            <span>{{ remaining_celebrities }} celebrities remaining</span>
        </div>
    </div>

    <!-- Genie with Question -->
    <div class="card rounded-3xl p-6 md:p-8 text-center">
        <!-- Genie Animation -->
        <div class="genie-container mb-4">
            <div class="text-6xl">üßû‚Äç‚ôÇÔ∏è</div>
        </div>

        <!-- Question -->
        <div class="mb-6">
            <h2 class="text-2xl md:text-3xl font-bold text-purple-900 mb-3">
                {{ question }}
            </h2>
            <p class="text-gray-600 text-sm">Question {{ question_number }} of {{ total_questions }}</p>
        </div>

        <!-- Answer Buttons -->
        <form method="POST" action="{% url 'submit_answer' %}" id="answerForm">
            {% csrf_token %}
            <input type="hidden" name="feature" value="{{ feature }}">
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">
                <!-- Yes Button -->
                <button type="submit" name="answer" value="yes"
                        class="answer-btn bg-gradient-to-r from-green-400 to-green-600 text-white font-bold text-lg py-4 px-6 rounded-2xl shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition">
                    <span class="text-2xl block mb-1">‚úÖ</span>
                    Yes
                </button>

                <!-- No Button -->
                <button type="submit" name="answer" value="no"
                        class="answer-btn bg-gradient-to-r from-red-400 to-red-600 text-white font-bold text-lg py-4 px-6 rounded-2xl shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition">
                    <span class="text-2xl block mb-1">‚ùå</span>
                    No
                </button>

                <!-- I Don't Know Button -->
                <button type="submit" name="answer" value="unknown"
                        class="answer-btn bg-gradient-to-r from-gray-400 to-gray-600 text-white font-bold text-lg py-4 px-6 rounded-2xl shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition">
                    <span class="text-2xl block mb-1">ü§∑</span>
                    I Don't Know
                </button>

                <!-- Probably Button -->
                <button type="submit" name="answer" value="probably"
                        class="answer-btn bg-gradient-to-r from-blue-400 to-blue-600 text-white font-bold text-lg py-4 px-6 rounded-2xl shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition">
                    <span class="text-2xl block mb-1">üëç</span>
                    Probably
                </button>

                <!-- Probably Not Button -->
                <button type="submit" name="answer" value="probably_not"
                        class="answer-btn bg-gradient-to-r from-orange-400 to-orange-600 text-white font-bold text-lg py-4 px-6 rounded-2xl shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition md:col-span-2">
                    <span class="text-2xl block mb-1">üëé</span>
                    Probably Not
                </button>
            </div>
        </form>
    </div>

    <!-- Hint -->
    <div class="text-center mt-4">
        <p class="text-white text-opacity-80 text-sm">
            üí° Tip: Answer honestly for better results!
        </p>
    </div>
</div>

<script>
    // Simple visual feedback
    const form = document.getElementById('answerForm');
    if (form) {
        form.addEventListener('submit', function(event) {
            const buttons = document.querySelectorAll('.answer-btn');
            buttons.forEach(btn => {
                if (btn !== event.submitter) {
                    btn.style.opacity = '0.5';
                }
            });
        });
    }
</script>
{% endblock %}